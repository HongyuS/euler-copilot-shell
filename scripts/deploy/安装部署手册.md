# **openEuler Intelligence 智能助手部署指南**

版本信息
当前版本：v0.9.6
更新日期：2025年8月4日

## 产品概述

openEuler Intelligence 是一款智能问答工具，使用 openEuler Intelligence 可以解决操作系统知识获取的便捷性，并且为OS领域模型赋能开发者及运维人员。作为获取操作系统知识，使能操作系统生产力工具 (如 A-Ops / A-Tune / x2openEuler / EulerMaker / EulerDevOps / StratoVirt / iSulad 等)，颠覆传统命令交付方式，由传统命令交付方式向自然语义进化，并结合智能体任务规划能力，降低开发、使用操作系统特性的门槛。

本指南提供基于自动化脚本的openEuler Intelligence智能助手系统部署说明，支持一键自动部署和手动分步部署两种方式。

### 组件介绍

| 组件                          | 端口            | 说明                  |
| ----------------------------- | --------------- | -------------------- |
| euler-copilot-framework       | 8002 (内部端口) | 智能体框架服务         |
| euler-copilot-web             | 8080            | 智能体前端界面        |
| euler-copilot-rag             | 9988 (内部端口) | 检索增强服务           |
| authhub-backend-service       | 11120 (内部端口) | 鉴权服务后端          |
| authhub-web-service           | 8000            | 鉴权服务前端          |
| redis                         | 6379 (内部端口) | Redis数据缓存          |
| minio                         | 9000 (内部端口) 9001(外部部端口) | minio对象存储       |
| mongo                         | 27017 (内部端口)  | mongo数据库           |
| openGauss                      | 5432 (内部端口) | 向量数据库             |
| secret_inject                 | 无              | 配置文件安全复制工具   |

### 软件要求
|     类型        | 版本要求                    |  说明                                |
|----------------|-------------------------|--------------------------------------|
| 操作系统    | openEuler 24.03 LTS SP2 | 无                                   |
---
### 硬件规格

| 硬件资源      |  最小配置                  |    推荐配置               |
|--------------|----------------------------|------------------------------|
| CPU          | 4 核心                     | 16 核心及以上                 |
| RAM          | 4 GB                       | 64 GB                        |
| 存储         | 32 GB                      | 64G                         |

**关键说明**：
- 建议通过调用 OpenAI 接口来实现功能。
## 快速开始
#### 1. 获取轻量化部署客户端
- dnf install openeuler-intelligence-installer

#### 2. 修改基础配置文件
~~~bash
[root@localhost 5-resource]# cd /usr/lib/openeuler-intelligence/scripts/5-resource/
[root@localhost 5-resource]# ll
总计 65828
-rwxr-xr-x. 1 root root  1681126 2025年 7月16日 9b5ad71b2ce5302211f9c61530b329a4922fc6a4
-rwxr-xr-x. 1 root root     1340  7月10日 15:40 config.toml
-rwxr-xr-x. 1 root root     1460 2025年 7月16日 env
-rwxr-xr-x. 1 root root      414 2025年 7月16日 framework.service
-rwxr-xr-x. 1 root root      409 2025年 7月16日 rag.service
-rwxr-xr-x. 1 root root 65697210 2025年 7月16日 tika-server-standard-3.2.0.jar
-rwxr-xr-x. 1 root root      312 2025年 7月16日 tika.service
-rwxr-xr-x. 1 root root      868 2025年 7月16日 token.py

[root@localhost 5-resource]# vim env  # 修改大模型相关配置参数
# LLM
MODEL_NAME = 
OPENAI_API_BASE = 
OPENAI_API_KEY = 
REQUEST_TIMEOUT = 300
MAX_TOKENS = 8192
TEMPERATURE = 0.07
# Embedding
EMBEDDING_TYPE = openai
EMBEDDING_API_KEY = 
EMBEDDING_ENDPOINT = 
EMBEDDING_MODEL_NAME = 

[root@localhost 5-resource]# config.toml  # 修改大模型相关配置参数
[embedding]
type = 'openai'
endpoint = 
api_key = 
model = 

[llm]
endpoint = 
key = 
model = 
max_tokens = 8192
temperature = 0.7

[function_call]
backend = 
endpoint = 
model = 
api_key = 
max_tokens = 8192
temperature = 0.7

[fastapi]
domain = '192.168.2.112' #修改ip为部署服务器ip
~~~

#### 3. 执行一键部署
~~~bash
[root@localhost 5-resource]# openeuler-intelligence-installer   #启动后直接输入 0 开启一键部署 等待部署完成，视网络情况好坏，大概在10~40分钟
一键部署菜单             
0) 自动部署
1) 手动部署
2) 重启服务
3) 卸载服务
4) 退出程序
请输入选项编号（0-4）: 

说明：0 是默认轻量部署，只部署framework框架；1 手动部署支持选择轻量部署还是全量部署，全量部署包含web端和知识库rag。
一键部署完openeuler-intelligence之后，轻量部署需要调用下面的初始化agent来构建agent服务。如果是全量部署，可以在web界面进行agent的构建。
~~~

#### 4. 初始化mcp agent
~~~bash
#创建mcp服务
openeuler-intelligence-installer --a init config.json
#config.json 为copilot对应的mcp服务配置文件，参考如下，传入全路径
{
    "name": "systrace_mcp_server",
    "overview": "systrace 运维 mcp 服务",
    "description": "systrace 运维 mcp 服务",
    "mcpType": "sse",
    "author": "root",
    "config": {
        "env": {},
        "autoApprove": [],
        "disabled": false,
        "auto_install": false,
        "description": "",
        "timeout": 60,
        "url": "http://127.0.0.1:12145/sse"
    }
}
#说明：init 多次调用会删除之前注册的mcp 服务，重新注册
#创建一一对应的agent应用
openeuler-intelligence-installer --a create config.json
#config.json 同上，是调用init之后，会在原始json里面添加serviceId字段标识mcp服务
{
    "name": "systrace_mcp_server",
    "overview": "systrace 运维 mcp 服务",
    "description": "systrace 运维 mcp 服务",
    "mcpType": "sse",
    "author": "root",
    "config": {
        "env": {},
        "autoApprove": [],
        "disabled": false,
        "auto_install": false,
        "description": "",
        "timeout": 60,
        "url": "http://127.0.0.1:12145/sse"
    },
    "serviceId":"p2qQke"
}
#创建多对一的agent应用
openeuler-intelligence-installer --a comb config.json
#config.json是组合多个mcp创建agent
{
  "appType": "agent", #应用类型，不需要修改
  "icon": "", #图标
  "name": "agent_comb",  #创建应用的名字
  "description": "测试agent comb", #创建的应用的描述
  "dialogRounds": 3, #对话轮次，默认3
  "permission": {  #权限，不需要修改
    "visibility": "public",
    "authorizedUsers": []
  },
  "workflows": [], #工作流预留参数，不需要修改
  "mcpService": [
    {
      "id": "jFOWgw" #注册的mcp返回的serviceId
    },
    {
      "id": "4tA5TO" #注册的mcp返回的serviceId
    }
  ],
  "published": "True" #是否公开
}
#说明：如果是sse 或者 streamHttp格式 mcp server，在注册之前需要服务端先启动并且可用
~~~

~~~
[root@localhost deploy]# openeuler-intelligence-installer --a init /root/mcp_config/perf_mcp/config.json 
2025-08-15 09:49:54,874 - mcp_manager - INFO - 成功加载配置文件: /root/mcp_config/perf_mcp/config.json
2025-08-15 09:49:54,874 - mcp_manager - INFO - 删除MCP服务: dJsLV4
2025-08-15 09:49:54,960 - mcp_manager - INFO - 已删除旧的MCP服务ID
2025-08-15 09:49:54,961 - mcp_manager - INFO - 创建MCP服务
2025-08-15 09:49:55,060 - mcp_manager - INFO - MCP服务创建成功，service_id: XMZ7Pb
2025-08-15 09:49:55,061 - mcp_manager - INFO - 配置文件已更新: /root/mcp_config/perf_mcp/config.json
2025-08-15 09:49:55,061 - mcp_manager - INFO - 操作执行成功
[root@localhost deploy]# openeuler-intelligence-installer --a create /root/mcp_config/perf_mcp/config.json 
2025-08-15 09:50:03,819 - mcp_manager - INFO - 成功加载配置文件: /root/mcp_config/perf_mcp/config.json
2025-08-15 09:50:03,819 - mcp_manager - INFO - 安装MCP服务: XMZ7Pb
2025-08-15 09:50:04,052 - mcp_manager - INFO - 等待MCP服务就绪: XMZ7Pb
2025-08-15 09:50:14,955 - mcp_manager - INFO - MCP服务 XMZ7Pb 已就绪 (耗时 9 秒)
2025-08-15 09:50:14,956 - mcp_manager - INFO - 激活MCP服务: XMZ7Pb
2025-08-15 09:50:15,057 - mcp_manager - INFO - 应用创建成功，app_id: cd4a8f3b-9b25-4608-8d4c-d2c435e15ffd
2025-08-15 09:50:15,057 - mcp_manager - INFO - 发布应用: cd4a8f3b-9b25-4608-8d4c-d2c435e15ffd
2025-08-15 09:50:15,149 - mcp_manager - INFO - Agent创建流程完成
2025-08-15 09:50:15,149 - mcp_manager - INFO - 操作执行成功
~~~